---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# epitraxr

<!-- badges: start -->
[![ForeSITE Group](https://github.com/EpiForeSITE/software/raw/e82ed88f75e0fe5c0a1a3b38c2b94509f122019c/docs/assets/foresite-software-badge.svg)](https://github.com/EpiForeSITE)
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![R-CMD-check](https://github.com/EpiForeSITE/epitraxr/actions/workflows/r-check.yaml/badge.svg)](https://github.com/EpiForeSITE/epitraxr/actions/workflows/r-check.yaml)
[![pkgdown](https://github.com/EpiForeSITE/epitraxr/actions/workflows/pkgdown.yaml/badge.svg)](https://github.com/EpiForeSITE/epitraxr/actions/workflows/pkgdown.yaml)
[![Codecov test coverage](https://codecov.io/gh/EpiForeSITE/epitraxr/graph/badge.svg)](https://app.codecov.io/gh/EpiForeSITE/epitraxr)
<!-- badges: end -->

The goal of `epitraxr` is to simplify the process of manipulating Epitrax data and generating reports. The package is targeted toward public health officials.

Work to create this software tool was made possible by cooperative agreement CDC-RFA-FT-23-0069 from the CDC's Center for Forecasting and Outbreak Analytics.

## Installation

You can install the development version of epitraxr from [GitHub](https://github.com/EpiForeSITE/epitraxr) with:

``` r
# install.packages("devtools")
devtools::install_github("EpiForeSITE/epitraxr")
```

## Examples

```{r include = FALSE}
library(epitraxr)
```

```{r example}
# Read the sample EpiTrax dataset included with the package
sample_file <- system.file("sample_data", "sample_epitrax_data.csv", package = "epitraxr")
epitrax_data <- read_epitrax_data(sample_file)

# Get the list of diseases in the dataset
diseases <- unique(epitrax_data$disease)

# Set up configuration
config <- list(
  current_population = 102000,
  avg_5yr_population = 97000,
  rounding_decimals = 1
)

# Generate monthly counts report for 2024
monthly_counts <- create_report_monthly_counts(
  data = epitrax_data,
  y = 2024,
  disease_names = diseases
)
monthly_counts

# Generate YTD counts with rates per 100k (through May)
ytd_report <- create_report_ytd_counts(
  data = epitrax_data,
  disease_names = diseases,
  y = 2024,
  m = 5,
  config = config,
  as.rates = TRUE
)
ytd_report
```
