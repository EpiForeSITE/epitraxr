<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Piped Mode • epitraxr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Piped Mode">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epitraxr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/epitraxr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/piped-mode.html">Piped Mode</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Piped Mode</h1>
            
      

      <div class="d-none name"><code>piped-mode.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>While the package functions can all be called individually (standard
mode, described briefly in <code><a href="../articles/epitraxr.html">vignette("epitraxr")</a></code>), we
<strong>recommend using the piped mode</strong> of the epitraxr package
because it results in much cleaner, more maintainable code. Instead of
calling and saving the results of each generated report, you use the
pipe operator <code>|&gt;</code> to chain together multiple reports and
all the reports are saved to a single <code>epitrax</code> object. You
can then either manipulate all the reports from the <code>epitrax</code>
object, or add to your pipe one of epitraxr’s export functions to write
reports to one of the supported formats (e.g., CSV).</p>
<p>In the epitraxr package, functions that expect a “piped” input are
identified by the prefix <code>epitrax_</code>. Within this family,
report generators are typically prefixed with either
<code>epitrax_preport_</code> or <code>epitrax_ireport_</code>
(corresponding to public and internal reports respectively), but can
also have the prefix <code>epitrax_report</code> (can do both public and
internal reports). Export functions are prefixed with
<code>epitrax_write_</code> (e.g.,
<code><a href="../reference/epitrax_write_csvs.html">epitrax_write_csvs()</a></code>).</p>
<p>This vignette will walk you through each step of an epitraxr pipe
then show the completed pipe running from end to end.</p>
<div class="section level3">
<h3 id="pipe-setup">Pipe Setup<a class="anchor" aria-label="anchor" href="#pipe-setup"></a>
</h3>
<div class="section level4">
<h4 id="create-an-epitrax-object">Create an <code>epitrax</code> object<a class="anchor" aria-label="anchor" href="#create-an-epitrax-object"></a>
</h4>
<p>The first step in piped mode is always to create an
<code>epitrax</code> object with the <code><a href="../reference/get_epitrax.html">get_epitrax()</a></code>
function. This object will contain the data, configuration options, and
report settings needed for all reports in the pipe. The
<code>epitrax</code> object is passed through each function in the pipe.
When a report is generated, it is appended to the appropriate list
(public or internal) in the <code>epitrax</code> object before the
object is passed to the next function in the pipe.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_fp</span> <span class="op">&lt;-</span> <span class="st">"vignette-data/epitrax_data.csv"</span></span>
<span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_epitrax.html">get_epitrax</a></span><span class="op">(</span>data_file <span class="op">=</span> <span class="va">data_fp</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"             "diseases"         "yrs"              "report_year"     </span></span>
<span><span class="co">#&gt; [5] "report_month"     "internal_reports" "public_reports"</span></span></code></pre></div>
<p>The <code><a href="../reference/get_epitrax.html">get_epitrax()</a></code> function reads the data in the
provided data file, validates, and formats it. It then adds the data to
the <code>epitrax</code> object as <code>epitrax$data</code>. The
function also extracts key information and summary statistics from the
data and adds those to the epitrax object as well: -
<code>epitrax$diseases</code>: All diseases found in the data -
<code>epitrax$yrs</code>: Years included in the data -
<code>epitrax$report_year</code> and <code>epitrax$report_month</code>:
The year and month treated as the “current” date for reports. Default to
the latest year/month in the data. -
<code>epitrax$internal_reports</code> and
<code>epitrax$public_reports</code>: Lists to hold generated reports.
Initially empty.</p>
<p><strong>Note:</strong> All further functions in the pipe will expect
an object of class <code>epitrax</code> as their first argument. Thus,
<code><a href="../reference/get_epitrax.html">get_epitrax()</a></code> is the start of the pipe.</p>
</div>
<div class="section level4">
<h4 id="add-disease-lists">Add Disease Lists<a class="anchor" aria-label="anchor" href="#add-disease-lists"></a>
</h4>
<p>The next step is adding two disease lists, one for internal reports
and one for public reports. If a given disease is not in the EpiTrax
data, that means there were no reported cases of that disease in those
years. That is still useful data that you may want to include in your
reports. The epitraxr package uses two lists because public reports
typically include a subset of diseases, while internal reports typically
include all tracked diseases. Add the disease lists to the
<code>epitrax</code> object using the
<code><a href="../reference/epitrax_add_report_diseases.html">epitrax_add_report_diseases()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">disease_lists</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  internal <span class="op">=</span> <span class="st">"vignette-data/ireport_diseases.csv"</span>,</span>
<span>  public <span class="op">=</span> <span class="st">"vignette-data/preport_diseases.csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_add_report_diseases.html">epitrax_add_report_diseases</a></span><span class="op">(</span><span class="va">epitrax</span>, disease_list_files <span class="op">=</span> <span class="va">disease_lists</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"             "diseases"         "yrs"              "report_year"     </span></span>
<span><span class="co">#&gt; [5] "report_month"     "internal_reports" "public_reports"   "report_diseases"</span></span></code></pre></div>
<p>The <code>epitrax</code> object now contains
<code>report_diseases</code> with <code>report_diseases$internal</code>
and <code>report_diseases$public</code> holding the individual
lists.</p>
</div>
<div class="section level4">
<h4 id="add-config">Add Config<a class="anchor" aria-label="anchor" href="#add-config"></a>
</h4>
<p>The last step is adding a configuration options. These can be read
from a list (<code><a href="../reference/epitrax_set_config_from_list.html">epitrax_set_config_from_list()</a></code>) or from a file
(<code><a href="../reference/epitrax_set_config_from_file.html">epitrax_set_config_from_file()</a></code>). Configuration options
provide report generators with important values, such as your area’s
current and previous population (used for converting counts to rates per
100k) and the trend threshold (used to determine if current counts are
above or below historical counts).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">config_file</span> <span class="op">&lt;-</span> <span class="st">"vignette-data/config.yaml"</span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_set_config_from_file.html">epitrax_set_config_from_file</a></span><span class="op">(</span><span class="va">epitrax</span>, filepath <span class="op">=</span> <span class="va">config_file</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"             "diseases"         "yrs"              "report_year"     </span></span>
<span><span class="co">#&gt; [5] "report_month"     "internal_reports" "public_reports"   "report_diseases" </span></span>
<span><span class="co">#&gt; [9] "config"</span></span></code></pre></div>
<p>The <code>epitrax</code> object now contains the <code>config</code>
details:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epitrax</span><span class="op">$</span><span class="va">config</span></span>
<span><span class="co">#&gt; $current_population</span></span>
<span><span class="co">#&gt; [1] 67000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $avg_5yr_population</span></span>
<span><span class="co">#&gt; [1] 65000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rounding_decimals</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $generate_csvs</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $trend_threshold</span></span>
<span><span class="co">#&gt; [1] 0.15</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="convenient-setup">Convenient Setup<a class="anchor" aria-label="anchor" href="#convenient-setup"></a>
</h4>
<p>Since these three operations must always occur before the report
generators can be run, epitraxr has the convenience function
<code><a href="../reference/setup_epitrax.html">setup_epitrax()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_epitrax.html">setup_epitrax</a></span><span class="op">(</span></span>
<span>  epitrax_file <span class="op">=</span> <span class="va">data_fp</span>,</span>
<span>  config_file <span class="op">=</span> <span class="va">config_file</span>,</span>
<span>  disease_list_files <span class="op">=</span> <span class="va">disease_lists</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"             "diseases"         "yrs"              "report_year"     </span></span>
<span><span class="co">#&gt; [5] "report_month"     "internal_reports" "public_reports"   "report_diseases" </span></span>
<span><span class="co">#&gt; [9] "config"</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="running-report-generators">Running Report Generators<a class="anchor" aria-label="anchor" href="#running-report-generators"></a>
</h3>
<p>At this point, the <code>epitrax</code> object is ready to be piped
into report generators. To start, run
<code><a href="../reference/epitrax_ireport_annual_counts.html">epitrax_ireport_annual_counts()</a></code> and
<code><a href="../reference/epitrax_ireport_monthly_counts_all_yrs.html">epitrax_ireport_monthly_counts_all_yrs()</a></code>, then inspect the
list of reports:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_ireport_annual_counts.html">epitrax_ireport_annual_counts</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_ireport_monthly_counts_all_yrs.html">epitrax_ireport_monthly_counts_all_yrs</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">$</span><span class="va">internal_reports</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "annual_counts"       "monthly_counts_2019" "monthly_counts_2020"</span></span>
<span><span class="co">#&gt; [4] "monthly_counts_2021" "monthly_counts_2022" "monthly_counts_2023"</span></span>
<span><span class="co">#&gt; [7] "monthly_counts_2024"</span></span></code></pre></div>
<p>Call a few more report generators:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_ireport_monthly_avgs.html">epitrax_ireport_monthly_avgs</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_ireport_ytd_counts_for_month.html">epitrax_ireport_ytd_counts_for_month</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_preport_month_crosssections.html">epitrax_preport_month_crosssections</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_preport_ytd_rates.html">epitrax_preport_ytd_rates</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">)</span></span></code></pre></div>
<p>The object now contains these internal reports:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">$</span><span class="va">internal_reports</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "annual_counts"          "monthly_counts_2019"    "monthly_counts_2020"   </span></span>
<span><span class="co">#&gt; [4] "monthly_counts_2021"    "monthly_counts_2022"    "monthly_counts_2023"   </span></span>
<span><span class="co">#&gt; [7] "monthly_counts_2024"    "monthly_avgs_2019-2024" "ytd_counts"</span></span></code></pre></div>
<p>And these public reports:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">$</span><span class="va">public_reports</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "public_report_Dec2024" "public_report_Nov2024" "public_report_Oct2024"</span></span>
<span><span class="co">#&gt; [4] "public_report_Sep2024" "public_report_YTD"</span></span></code></pre></div>
<p>As you can see, each report generator simply appends the created
reports to the appropriate list.</p>
</div>
<div class="section level3">
<h3 id="exporting-reports">Exporting Reports<a class="anchor" aria-label="anchor" href="#exporting-reports"></a>
</h3>
<p>While you may want to process the reports contained in the
<code>epitrax</code> object in R, you will often export the generated
reports to one of the formats supported by epitraxr.</p>
<div class="section level4">
<h4 id="setup-filesystem">Setup Filesystem<a class="anchor" aria-label="anchor" href="#setup-filesystem"></a>
</h4>
<p>To use export functions in epitraxr, you need to provide folder paths
for internal and public reports. These are organized as a list. The
<code><a href="../reference/setup_filesystem.html">setup_filesystem()</a></code> function creates the folders (if they
don’t already exist) and optionally clears out any old reports from
previous runs:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">fsys</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  internal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="st">"internal_reports"</span><span class="op">)</span>,</span>
<span>  public <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="st">"public_reports"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fsys</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_filesystem.html">setup_filesystem</a></span><span class="op">(</span>folders <span class="op">=</span> <span class="va">fsys</span>, clear.reports <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>You can skip the <code><a href="../reference/setup_filesystem.html">setup_filesystem()</a></code> function, if you
know your folders are created and ready to receive reports.</p>
<p>You will pass this <code>fsys</code> list to epitraxr export
functions.</p>
</div>
<div class="section level4">
<h4 id="export-to-csv">Export to CSV<a class="anchor" aria-label="anchor" href="#export-to-csv"></a>
</h4>
<p>The most common export format is CSV using the
<code><a href="../reference/epitrax_write_csvs.html">epitrax_write_csvs()</a></code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/epitrax_write_csvs.html">epitrax_write_csvs</a></span><span class="op">(</span><span class="va">epitrax</span>, fsys <span class="op">=</span> <span class="va">fsys</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">fsys</span><span class="op">$</span><span class="va">internal</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "annual_counts.csv"          "monthly_avgs_2019-2024.csv"</span></span>
<span><span class="co">#&gt; [3] "monthly_counts_2019.csv"    "monthly_counts_2020.csv"   </span></span>
<span><span class="co">#&gt; [5] "monthly_counts_2021.csv"    "monthly_counts_2022.csv"   </span></span>
<span><span class="co">#&gt; [7] "monthly_counts_2023.csv"    "monthly_counts_2024.csv"   </span></span>
<span><span class="co">#&gt; [9] "ytd_counts.csv"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">fsys</span><span class="op">$</span><span class="va">public</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "public_report_Dec2024.csv" "public_report_Nov2024.csv"</span></span>
<span><span class="co">#&gt; [3] "public_report_Oct2024.csv" "public_report_Sep2024.csv"</span></span>
<span><span class="co">#&gt; [5] "public_report_YTD.csv"</span></span></code></pre></div>
<p>Typically, export functions are called at the end of the pipe.
However, since export functions do not modify the <code>epitrax</code>
object, you can safely insert these functions anywhere in the pipe.</p>
</div>
</div>
<div class="section level3">
<h3 id="full-pipe-putting-it-all-together">Full Pipe: Putting It All Together<a class="anchor" aria-label="anchor" href="#full-pipe-putting-it-all-together"></a>
</h3>
<p>Here is the full pipe described above:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Data and config files</span></span>
<span><span class="va">data_fp</span> <span class="op">&lt;-</span> <span class="st">"vignette-data/epitrax_data.csv"</span></span>
<span><span class="va">disease_lists</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  internal <span class="op">=</span> <span class="st">"vignette-data/ireport_diseases.csv"</span>,</span>
<span>  public <span class="op">=</span> <span class="st">"vignette-data/preport_diseases.csv"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">config_file</span> <span class="op">&lt;-</span> <span class="st">"vignette-data/config.yaml"</span></span>
<span></span>
<span><span class="co"># Setup filesystem</span></span>
<span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">fsys</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  internal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="st">"internal_reports"</span><span class="op">)</span>,</span>
<span>  public <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="st">"public_reports"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fsys</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_filesystem.html">setup_filesystem</a></span><span class="op">(</span>folders <span class="op">=</span> <span class="va">fsys</span>, clear.reports <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run report generation pipe</span></span>
<span><span class="va">epitrax</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_epitrax.html">setup_epitrax</a></span><span class="op">(</span></span>
<span>    epitrax_file <span class="op">=</span> <span class="va">data_fp</span>,</span>
<span>    config_file <span class="op">=</span> <span class="va">config_file</span>,</span>
<span>    disease_list_files <span class="op">=</span> <span class="va">disease_lists</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_ireport_annual_counts.html">epitrax_ireport_annual_counts</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_ireport_monthly_counts_all_yrs.html">epitrax_ireport_monthly_counts_all_yrs</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_ireport_monthly_avgs.html">epitrax_ireport_monthly_avgs</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_ireport_ytd_counts_for_month.html">epitrax_ireport_ytd_counts_for_month</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_preport_month_crosssections.html">epitrax_preport_month_crosssections</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_preport_ytd_rates.html">epitrax_preport_ytd_rates</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/epitrax_write_csvs.html">epitrax_write_csvs</a></span><span class="op">(</span>fsys <span class="op">=</span> <span class="va">fsys</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">$</span><span class="va">internal_reports</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">fsys</span><span class="op">$</span><span class="va">internal</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "annual_counts.csv"          "monthly_avgs_2019-2024.csv"</span></span>
<span><span class="co">#&gt; [3] "monthly_counts_2019.csv"    "monthly_counts_2020.csv"   </span></span>
<span><span class="co">#&gt; [5] "monthly_counts_2021.csv"    "monthly_counts_2022.csv"   </span></span>
<span><span class="co">#&gt; [7] "monthly_counts_2023.csv"    "monthly_counts_2024.csv"   </span></span>
<span><span class="co">#&gt; [9] "ytd_counts.csv"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">epitrax</span><span class="op">$</span><span class="va">public_reports</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">fsys</span><span class="op">$</span><span class="va">public</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "public_report_Dec2024.csv" "public_report_Nov2024.csv"</span></span>
<span><span class="co">#&gt; [3] "public_report_Oct2024.csv" "public_report_Sep2024.csv"</span></span>
<span><span class="co">#&gt; [5] "public_report_YTD.csv"</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Pulsipher, Nate Lanza, Centers for Disease Control and Prevention’s Center for Forecasting and Outbreak Analytics.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
